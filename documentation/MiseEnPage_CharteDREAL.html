<!DOCTYPE html>
            <html>
                <head>
                    <title>MiseEnPage_CharteDREAL.md</title>
	                <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
	                <meta http-equiv="content-type" content="text/html; charset=utf-8">
                    <style type="text/css">
                    /*
Copyright (c) 2017 Chris Patuzzo
https://twitter.com/chrispatuzzo
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px;
  color: #333;
}

body &gt; *:first-child {
  margin-top: 0 !important;
}

body &gt; *:last-child {
  margin-bottom: 0 !important;
}

a {
  color: #4183C4;
  text-decoration: none;
}

a.absent {
  color: #cc0000;
}

a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
}

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative;
}

h2:first-child, h1:first-child, h1:first-child + h2, h3:first-child, h4:first-child, h5:first-child, h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  text-decoration: none;
}

h1 tt, h1 code {
  font-size: inherit;
}

h2 tt, h2 code {
  font-size: inherit;
}

h3 tt, h3 code {
  font-size: inherit;
}

h4 tt, h4 code {
  font-size: inherit;
}

h5 tt, h5 code {
  font-size: inherit;
}

h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: black;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777777;
  font-size: 14px;
}

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0;
}

/*
hr {
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}
*/
body &gt; h2:first-child {
  margin-top: 0;
  padding-top: 0;
}

body &gt; h1:first-child {
  margin-top: 0;
  padding-top: 0;
}

body &gt; h1:first-child + h2 {
  margin-top: 0;
  padding-top: 0;
}

body &gt; h3:first-child, body &gt; h4:first-child, body &gt; h5:first-child, body &gt; h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0;
}

li p.first {
  display: inline-block;
}

ul, ol {
  padding-left: 30px;
}

ul :first-child, ol :first-child {
  margin-top: 0;
}

ul :last-child, ol :last-child {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt &gt; :first-child {
  margin-top: 0;
}

dl dt &gt; :last-child {
  margin-bottom: 0;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd &gt; :first-child {
  margin-top: 0;
}

dl dd &gt; :last-child {
  margin-bottom: 0;
}

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777;
}

blockquote &gt; :first-child {
  margin-top: 0;
}

blockquote &gt; :last-child {
  margin-bottom: 0;
}

table {
  padding: 0;
}
table tr {
  border-top: 1px solid #cccccc;
  background-color: white;
  margin: 0;
  padding: 0;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

table tr th {
  font-weight: bold;
  border: 1px solid #cccccc;
  text-align: left;
  margin: 0;
  padding: 6px 13px;
}

table tr td {
  border: 1px solid #cccccc;
  text-align: left;
  margin: 0;
  padding: 6px 13px;
}

table tr th :first-child, table tr td :first-child {
  margin-top: 0;
}

table tr th :last-child, table tr td :last-child {
  margin-bottom: 0;
}

img {
  max-width: 100%;
}

span.frame {
  display: block;
  overflow: hidden;
}

span.frame &gt; span {
  border: 1px solid #dddddd;
  display: block;
  float: left;
  overflow: hidden;
  margin: 13px 0 0;
  padding: 7px;
  width: auto;
}

span.frame span img {
  display: block;
  float: left;
}

span.frame span span {
  clear: both;
  color: #333333;
  display: block;
  padding: 5px 0 0;
}

span.align-center {
  display: block;
  overflow: hidden;
  clear: both;
}

span.align-center &gt; span {
  display: block;
  overflow: hidden;
  margin: 13px auto 0;
  text-align: center;
}

span.align-center span img {
  margin: 0 auto;
  text-align: center;
}

span.align-right {
  display: block;
  overflow: hidden;
  clear: both;
}

span.align-right &gt; span {
  display: block;
  overflow: hidden;
  margin: 13px 0 0;
  text-align: right;
}

span.align-right span img {
  margin: 0;
  text-align: right;
}

span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left;
}

span.float-left span {
  margin: 13px 0 0;
}

span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right;
}

span.float-right &gt; span {
  display: block;
  overflow: hidden;
  margin: 13px auto 0;
  text-align: right;
}

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}
                    </style>
                </head>
                <body style="">
                <h1 id="0">Mise en page à la charte graphique DREAL</h1>
<p id="2"><img src="file:///d:/users/jerome.potel/Documents/Developpement/QGIS_MiseEnPage/documentation/img/image4.jpg" alt="image exemple charte" /></p>
<h2 id="4">Contexte</h2>
<p id="6">Cette charte n'est à appliquer que lorsque la carte à produire est un document à part entière.</p>
<p id="8"><strong>Elle n'a pas à être utilisée pour une carte qui est destinée à être intégrée dans un document possédant déjà sa propre charte graphique.</strong></p>
<p id="10">Ce document explique comment configurer la mise en page dans QGIS afin d'obtenir le résultat escompté.</p>
<p id="12">Il ne traite pas du contenu de la carte (fond à utiliser, sémiologie graphique...) et se limite qu'au cas d'une production &quot;simple&quot;. Il n'aborde pas le cas des atlas.</p>
<h2 id="14">les fichiers disponibles</h2>
<p id="16">Le principe général est de suivre au plus pret les règles définies dans la <a href="https://www.gouvernement.fr/charte/charte-graphique-les-fondamentaux/introduction">charte gouvernementale</a>.
Cette charte ne fait donc plus de distinction thématique (choix d'une couleur par thème) et se veut plus sobre mettant en avant le contenu de la carte.</p>
<p id="19">Un seul fichier de mise en page QGIS (.qpt) permet de réaliser l'ensemble des formats A3, A4, A5, paysage, portrait, etc. La mise en forme s'adapte en fonction des critères que le cartographe renseignera.</p>
<p id="21"><img src="file:///d:/users/jerome.potel/Documents/Developpement/QGIS_MiseEnPage/documentation/img/norm.svg" alt="bloc-marque" /></p>
<p id="23">Le bloc-marque au format svg est stocké sur un serveur web internet.</p>
<h2 id="25">Les éléments paramétrables</h2>
<h3 id="27">Le format de la page</h3>
<p id="29">Le format de la page se paramètre via les &quot;propriétés de la page&quot; accessible par un clic droit sur la page.</p>
<p id="31">Là, l'opérateur peut choisir la taille de sortie de la page (A4, A3, A5,...) et son orientation. La mise en page s'adaptera automatiquement aux choix qui sont faits.</p>
<h3 id="33">La hauteur de la mariane</h3>
<p id="35">Les documents produits selon la charte gouvernementale suivent des règles de composition basées sur la hauteur de la Marianne du bloc-marque. Par défaut et pour l'utilisation au format A3, A4 et A5, cette hauteur est fixée à <code>2,5 mm</code>. Dans le cadre d'une production particulière cette hauteur peut être modifiée en changeant la valeur de la variable de mise en page <code>@hauteur_marianne</code></p>
<p id="37"><img src="file:///d:/users/jerome.potel/Documents/Developpement/QGIS_MiseEnPage/documentation/img/image1.jpg" alt="hauteur Marianne" /></p>
<p id="39">La mise en page se mettra à jour automatiquement en fonction de la valeur de cette variable.</p>
<h3 id="41">Le choix de l'emprise</h3>
<p id="43">L'emprise de la carte, avec notament les paramètres <code>Échelle</code>, <code>Min X</code>, <code>Max X</code>, <code>Min Y</code> et <code>Max Y</code>, peut être définie automatiquement via la variable de mise en page <code>@emprise_carte</code></p>
<p id="45"><img src="file:///d:/users/jerome.potel/Documents/Developpement/QGIS_MiseEnPage/documentation/img/image2.jpg" alt="emprise de la carte" /></p>
<p id="47">Cette variable stocke une chaine de caractère dont l'évaluation donne la géometrie de l'objet définissant l'emprise. Ainsi, si l'objectif est de produire une carte sur le département du Calvados et que le projet contient la couche <code>DEPARTEMENT</code> possédant l'attribut <code>insee_dep</code>, l'opérateur pourra renseigner dans cette variable la valeur <code>geometry(get_feature('DEPARTEMENT','insee_dep','14')</code>.</p>
<p id="49">L'échelle et l'emprise seront alors modifiées automatiquement pour obtenir le résultat souhaité.</p>
<h3 id="51">Autres éléments paramétrables</h3>
<p id="53">Deux autres éléments sont paramétrables pour régler la composition de la carte. Il s'agit de la <strong>largeur du cartouche</strong> et de la <strong>dimension des marges internes au cartouche</strong>. Ces paramétrages s'effectuent respectivement dans les variables de mise en page <code>@largeur_cartouche</code> et <code>@marge_cartouche</code></p>
<p id="55"><img src="file:///d:/users/jerome.potel/Documents/Developpement/QGIS_MiseEnPage/documentation/img/image3.jpg" alt="emprise de la carte" /></p>
<h2 id="57">Les éléments à modifier</h2>
<h3 id="59">La légende</h3>
<p id="61">L'opérateur choisira les éléments à intégrer dans la légende.</p>
<h3 id="63">Le titre</h3>
<p id="65">Le titre de la carte doit être renseigné manuellement dans le cadre prévu à cet effet. Il doit être simple et explicite comme par exemple <code>Les plans de prévention des risques en Normandie au 1er janvier 2020</code></p>
<h3 id="67">Les sources</h3>
<p id="69">La mention des sources est une obligation et doit s'effectuer selon les obligations fixées par le producteur de la donnée représentée.</p>
<p id="71">exemple :</p>
<pre><code id="73">- IGN, AdminExpress COG 2020
- DREAL Normandie, ZNS 2020
</code></pre>
<h3 id="78">La référence</h3>
<p id="80">La référence prend le nom du fichier projet QGIS. Avant d'exporter le résultat de la mise en page, il convient donc d'enregistrer le projet QGIS.</p>

                </body>
            <html>
            